diff --git a/llwe.c b/llwe.c
index 48598c9..01e33be 100644
--- a/llwe.c
+++ b/llwe.c
@@ -121,7 +121,7 @@ loop:	if (isend(end))
 	if (c == 0)
 		r++;
 	end++;
-	if (r < LINES)
+	if (r < LINES - 1)
 		goto loop;
 	else
 		end--;
@@ -256,7 +256,7 @@ static int insertmode(char *t)
 			c = '\n';
 		if (c == C_D)
 			return 1;
-		if (c == KEY_BACKSPACE) {
+		if (c == '\b' || c == 127) {
 			if (t <= buffer)
 				continue;
 			t--;
@@ -294,14 +294,10 @@ static int cmdloop(void)
 		c = getch();
 		switch (c) {
 		case C_D:
-		case KEY_DOWN:
-		case KEY_NPAGE:
 		case 'j':
 			doscrl(LINES / 2);
 			break;
 		case C_U:
-		case KEY_UP:
-		case KEY_PPAGE:
 		case 'k':
 			doscrl(-LINES / 2);
 			break;
@@ -370,8 +366,6 @@ int main(int argc, char **argv)
 		cbreak();
 		noecho();
 		nonl();
-		intrflush(stdscr, FALSE);
-		keypad(stdscr, TRUE);
 		filename = argv[1];
 		ed();
 		endwin();
diff --git a/vms.patch b/vms.patch
index cda4e57..e69de29 100644
--- a/vms.patch
+++ b/vms.patch
@@ -1,37 +0,0 @@
-diff --git a/llwe.c b/llwe.c
-index 48598c9..f402e47 100644
---- a/llwe.c
-+++ b/llwe.c
-@@ -256,7 +256,7 @@ static int insertmode(char *t)
- 			c = '\n';
- 		if (c == C_D)
- 			return 1;
--		if (c == KEY_BACKSPACE) {
-+		if (c == '\b') {
- 			if (t <= buffer)
- 				continue;
- 			t--;
-@@ -294,14 +294,10 @@ static int cmdloop(void)
- 		c = getch();
- 		switch (c) {
- 		case C_D:
--		case KEY_DOWN:
--		case KEY_NPAGE:
- 		case 'j':
- 			doscrl(LINES / 2);
- 			break;
- 		case C_U:
--		case KEY_UP:
--		case KEY_PPAGE:
- 		case 'k':
- 			doscrl(-LINES / 2);
- 			break;
-@@ -370,8 +366,6 @@ int main(int argc, char **argv)
- 		cbreak();
- 		noecho();
- 		nonl();
--		intrflush(stdscr, FALSE);
--		keypad(stdscr, TRUE);
- 		filename = argv[1];
- 		ed();
- 		endwin();
